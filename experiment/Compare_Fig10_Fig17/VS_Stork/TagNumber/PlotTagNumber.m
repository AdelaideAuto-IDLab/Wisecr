clear all;
%close all;
clc;

Wisecr_1_l = [4.6352593
4.0552593
4.5439267
6.0081502
4.6006663
5.5734354
4.5328786
4.2173257
3.6977162
4.9911514
4.9715574
4.2720978
4.2899602
4.7670192
4.814482
7.7936329
4.3461482
5.0074136
4.6401951
3.7851972
4.2615492
4.9775116
6.542024
6.0437406
4.5636678
5.2689396
4.238909
4.005516
3.9959751
4.5800045
5.0119168
5.7564677
5.2857444
5.0126449
4.5040372
5.0299751
4.7488564
4.5488156
4.8331609
4.8176168
5.9681706
4.099472
4.2428684
4.0182646
4.0761866
4.8019108
4.568616
4.3042176
3.7789151
5.5364227
4.2616308
4.9980241
7.805418
4.8352739
9.5695824
4.7283572
5.2487394
4.2796054
4.5433558
5.7677439
4.7758216
5.3517432
4.0288648
4.5497178
5.242964
4.2879643
4.5364896
4.815338
4.6074934
4.5272167
5.1414035
4.300076
4.2260385
5.2336217
4.5572734
4.4761294
4.7897078
4.3679574
5.0045405
5.27765
4.3082497
4.9357741
4.8107303
4.5205996
5.5854913
5.0540241
4.3025226
4.2677977
4.361323
4.792029
4.4713291
6.1567499
4.5680213
4.9645722
4.7496083
5.0490915
4.5524712
5.5581097
3.8743657
4.7785102
];


Stork_1_l = [0.862000000000000;1.09700000000000;0.737000000000000;0.574000000000000;2.20200000000000;1.89300000000000;1.91700000000000;1.25900000000000;0.872000000000000;0.858000000000000;0.318000000000000;1.11600000000000;1.02300000000000;1.95400000000000;1.45400000000000;0.828000000000000;1.02900000000000;1.15200000000000;0.859000000000000;0.802000000000000;0.581000000000000;0.606000000000000;0.324000000000000;0.995000000000000;0.307000000000000;0.441000000000000;0.923000000000000;0.320000000000000;0.358000000000000;1.03100000000000;0.659000000000000;0.349000000000000;1.25300000000000;0.860000000000000;0.707000000000000;0.884000000000000;1.97500000000000;0.875000000000000;0.624000000000000;1.11300000000000;1.36800000000000;0.913000000000000;0.803000000000000;1.06200000000000;1.40800000000000;0.639000000000000;0.996000000000000;1.57400000000000;1.25100000000000;0.673000000000000;0.511000000000000;1.10300000000000;0.419000000000000;0.920000000000000;1.03900000000000;0.810000000000000;0.878000000000000;0.957000000000000;0.719000000000000;1.10500000000000;1.94800000000000;0.846000000000000;1.01700000000000;0.993000000000000;1.11300000000000;0.484000000000000;1.12700000000000;0.520000000000000;1.11500000000000;0.453000000000000;2.14800000000000;0.774000000000000;1.83200000000000;1.40700000000000;1.04200000000000;1.04300000000000;1.13100000000000;1.85900000000000;1.04500000000000;3.28400000000000;1.81800000000000;1.05100000000000;0.688000000000000;2.49500000000000;1.13200000000000;0.796000000000000;2.02700000000000;1.93000000000000;0.934000000000000;0.930000000000000;1.08800000000000;1.85000000000000;1.32600000000000;2.51200000000000;1.04200000000000;1.00300000000000;1.35300000000000;2.68300000000000;1.21200000000000;2.69900000000000];

Wisecr_2_l = [5.6207021
5.3388635
6.5558927
5.2134019
5.2086094
5.5409793
13.948863
5.3110402
4.9092079
7.8381247
5.6697762
5.3613885
6.7133878
5.6389446
5.3711017
6.3497976
5.1484431
6.5507289
5.4006543
5.1638178
5.8575043
5.7275806
5.8499545
5.4662055
6.5580473
5.5884612
5.6149685
5.9823341
5.1244138
5.3521658
5.6258933
22.5542306
6.0002344
5.9546564
5.409403
5.1370303
4.8191759
5.386737
5.573436
5.1685152
5.3395036
5.1514398
5.5469533
5.9594253
5.4513833
5.3422628
5.2301115
5.2175621
5.6078603
5.9385172
5.389359
5.7068842
5.1531915
5.3906228
5.8939715
8.0984298
5.4287184
5.371262
5.6182808
6.7350245
5.3924706
5.3863553
4.6744213
5.6879323
5.5040855
6.056201
5.1627628
4.6604885
5.4470161
5.1609926
4.9601745
5.4298729
5.3879641
5.7762189
5.1776861
11.1246382
5.3750063
5.6385417
6.0270394
5.8877637
6.6819781
4.8621122
5.623295
5.1375167
5.5163638
5.7305127
6.4387693
5.8252268
6.4177798
5.0272268
5.0824779
5.2927103
5.1282553
5.4589036
5.202648
5.7947461
5.4614063
4.9525795
5.0810148
5.1878124
];

Stork_2_l = [4.33100000000000;2.03400000000000;1.98100000000000;5.22400000000000;2.65400000000000;3.26600000000000;1.84800000000000;2.60100000000000;3.91000000000000;3.33400000000000;2.85100000000000;4.66400000000000;1.53600000000000;3.96700000000000;3.58600000000000;2.99900000000000;2.34100000000000;8.07500000000000;5.77200000000000;2.85300000000000;2.75100000000000;2.54000000000000;4.92400000000000;2.78900000000000;3.01400000000000;2.97000000000000;2.20400000000000;3.70900000000000;3.15200000000000;3.90700000000000;2.42100000000000;2.70700000000000;2.60600000000000;2.68800000000000;5.99700000000000;3.25000000000000;5.24200000000000;4.62800000000000;5.00700000000000;4.39400000000000;2.67800000000000;6.30700000000000;3.54000000000000;3.30400000000000;3.51300000000000;7.67600000000000;3.78600000000000;3.42000000000000;2.50500000000000;3.58700000000000;4.40600000000000;6.34500000000000;5.43200000000000;4.54400000000000;4.18800000000000;2.97000000000000;3.65500000000000;3.78600000000000;4.19600000000000;5.59300000000000;2.83800000000000;3.46400000000000;8.47300000000000;4.38300000000000;5.16200000000000;7.64700000000000;7.72600000000000;3.06200000000000;3.66500000000000;2.87200000000000;5.58600000000000;3.19700000000000;4.20800000000000;3.88700000000000;4.08000000000000;6.00900000000000;3.15300000000000;6.06100000000000;3.70700000000000;5.92800000000000;4.87600000000000;4.05500000000000;4.99100000000000;4.99900000000000;6.71000000000000;5.43800000000000;3.55600000000000;5.63700000000000;7.15000000000000;3.76400000000000;4.12700000000000;5.41600000000000;8.97600000000000;3.37100000000000;6.43100000000000;4.60100000000000;5.92100000000000;3.73200000000000;7.00100000000000;3.31700000000000];

Wisecr_3_l = [17.5425937
35.1658934
11.3070072
8.5039287
10.5003766
6.8590575
7.0802919
6.4087519
6.542978
6.2278261
7.4981468
7.7568501
6.0066871
6.2340398
6.7375586
6.2310873
6.4582631
7.9128379
6.9021048
6.5000924
6.4265891
7.4412556
6.7762742
7.2670019
8.1006078
7.2153689
6.3254001
7.1148345
6.9693982
6.9860676
6.6800163
6.9556554
7.7730634
6.0932791
6.1491949
6.2691501
6.506717
23.3824459
8.9561578
6.5659873
7.1518244
6.0182802
7.248715
6.261469
6.224814
6.9306635
8.8121603
7.217968
6.876328
6.589727
6.491339
6.6100165
6.7876762
6.765377
13.3134997
11.174745
6.2228068
7.0125517
6.9255034
6.3273583
6.1738724
5.8368214
6.998339
6.6593729
6.4933636
7.0287771
6.7502944
8.0037405
11.7549601
6.3536385
6.4723684
6.9132771
7.2948969
6.6221452
7.5437525
7.1370548
12.4650473
6.0389435
7.1644402
6.7007243
6.7678531
6.698333
7.3266033
6.6280874
6.5284394
14.9030888
7.2811251
6.9630917
6.7399327
6.7534444
6.5237929
6.2678711
7.3327673
6.9292953
12.2594834
11.01679
7.0177504
6.7361911
7.0333012
6.8357474
];

Stork_3_l = [11.2890000000000;7.19200000000000;3.60700000000000;4.72200000000000;9.43400000000000;8.69200000000000;4.30400000000000;8.36100000000000;6.55400000000000;8.05300000000000;5.75100000000000;5.93600000000000;6.18300000000000;5.66000000000000;5.82000000000000;5.06900000000000;5.55700000000000;5.99200000000000;6.88500000000000;5.57900000000000;4.67900000000000;7.13600000000000;6.91100000000000;9.38400000000000;7.66000000000000;8.96000000000000;5.99000000000000;6.07300000000000;5.02300000000000;7.15100000000000;5.64400000000000;9.04000000000000;7.87100000000000;6.55000000000000;5.66000000000000;4.98600000000000;6.22900000000000;5.00700000000000;5.09100000000000;7.90800000000000;9.73200000000000;6.58000000000000;5.72000000000000;5.59300000000000;6.61500000000000;9.00900000000000;4.95400000000000;8.38500000000000;7.27600000000000;7.29100000000000;7.18200000000000;7.54100000000000;5.95200000000000;6.09600000000000;6.93500000000000;10.1670000000000;7.20300000000000;6.36500000000000;7.69400000000000;7.38300000000000;9.38700000000000;8.01600000000000;6.55100000000000;6.90200000000000;8.35000000000000;8.34700000000000;7.42500000000000;7.07900000000000;7.39300000000000;8.87900000000000;7.44200000000000;5.55900000000000;9.01000000000000;8.14400000000000;6.49700000000000;8.87000000000000;10.1820000000000;13.8680000000000;8.80100000000000;8.45300000000000;11.0970000000000;7.67000000000000;8.89300000000000;7.28300000000000;9.92200000000000;13.6710000000000;8.27500000000000;7.52400000000000;9.94000000000000;9.31600000000000;8.65800000000000;11.4740000000000;7.93700000000000;11.1610000000000;9.90300000000000;8.17600000000000;10.5560000000000;10.4710000000000;11.5650000000000;11.6080000000000];

Wisecr_4_l = [17.5425937
35.1658934
11.3070072
8.5039287
10.5003766
6.8590575
7.0802919
6.4087519
6.542978
6.2278261
7.4981468
7.7568501
6.0066871
6.2340398
6.7375586
6.2310873
6.4582631
7.9128379
6.9021048
6.5000924
6.4265891
7.4412556
6.7762742
7.2670019
8.1006078
7.2153689
6.3254001
7.1148345
6.9693982
6.9860676
6.6800163
6.9556554
7.7730634
6.0932791
6.1491949
6.2691501
6.506717
23.3824459
8.9561578
6.5659873
7.1518244
6.0182802
7.248715
6.261469
6.224814
6.9306635
8.8121603
7.217968
6.876328
6.589727
6.491339
6.6100165
6.7876762
6.765377
13.3134997
11.174745
6.2228068
7.0125517
6.9255034
6.3273583
6.1738724
5.8368214
6.998339
6.6593729
6.4933636
7.0287771
6.7502944
8.0037405
11.7549601
6.3536385
6.4723684
6.9132771
7.2948969
6.6221452
7.5437525
7.1370548
12.4650473
6.0389435
7.1644402
6.7007243
6.7678531
6.698333
7.3266033
6.6280874
6.5284394
14.9030888
7.2811251
6.9630917
6.7399327
6.7534444
6.5237929
6.2678711
7.3327673
6.9292953
12.2594834
11.01679
7.0177504
6.7361911
7.0333012
6.8357474
];

Stork_4_l = [8.76400000000000;15.0560000000000;11.3210000000000;15.5840000000000;6.83900000000000;7.45100000000000;11.0740000000000;15.1360000000000;14.9530000000000;12.6730000000000;7.87800000000000;8.55200000000000;8.60100000000000;11.3910000000000;10.2920000000000;9.34600000000000;8.88900000000000;13.4500000000000;17.8570000000000;9.91800000000000;9.68600000000000;8.74000000000000;12.0230000000000;8.80300000000000;14.3810000000000;11.6810000000000;13.5600000000000;15.1460000000000;10.6890000000000;15.7230000000000;11.2900000000000;9.90300000000000;9.88200000000000;13.3920000000000;10.2300000000000;11.1300000000000;11.3770000000000;15.0030000000000;8.70900000000000;14.2510000000000;9.00900000000000;12.0300000000000;14.1020000000000;12.0570000000000;10.6720000000000;8.87100000000000;7.49800000000000;12.6760000000000;12.7780000000000;12.1680000000000;10.8640000000000;18.4740000000000;12.5260000000000;10.5910000000000;12.7270000000000;8.30600000000000;11.9000000000000;11.3930000000000;13.1420000000000;15.3430000000000;15.7130000000000;14.3230000000000;11.6530000000000;13.2470000000000;10.4540000000000;12.3020000000000;15.3500000000000;12.1530000000000;11.8340000000000;14.6040000000000;14.1620000000000;10.7260000000000;14.6610000000000;16.2190000000000;13.0350000000000;10.8680000000000;10.8040000000000;12.6840000000000;15.1160000000000;16.1730000000000;15.3560000000000;11.4910000000000;11.2950000000000;16.6230000000000;13.0240000000000;16.9620000000000;14.0870000000000;13.8810000000000;13.3890000000000;11.1870000000000;15.1570000000000;15.7520000000000;18.1360000000000;20.4690000000000;12.4190000000000;14.5160000000000;13.2980000000000;13.7750000000000;11.8870000000000;16.7280000000000];

% remove outliers
Wisecr_1_l = rmoutliers(Wisecr_1_l,'quartiles');
Wisecr_2_l = rmoutliers(Wisecr_2_l,'quartiles');
Wisecr_3_l = rmoutliers(Wisecr_3_l,'quartiles');
Wisecr_4_l = rmoutliers(Wisecr_4_l,'quartiles');
Stork_1_l = rmoutliers(Stork_1_l,'quartiles');
Stork_2_l = rmoutliers(Stork_2_l,'quartiles');
Stork_3_l = rmoutliers(Stork_3_l,'quartiles');
Stork_4_l = rmoutliers(Stork_4_l,'quartiles');

Wisecr_1_t = 407*8*1./Wisecr_1_l;
Wisecr_2_t = 407*8*2./Wisecr_2_l;
Wisecr_3_t = 407*8*3./Wisecr_3_l;
Wisecr_4_t = 407*8*4./Wisecr_4_l;

Stork_1_t = 407*8*1./Stork_1_l;
Stork_2_t = 407*8*2./Stork_2_l;
Stork_3_t = 407*8*3./Stork_3_l;
Stork_4_t = 407*8*4./Stork_4_l;

y1= [mean(Wisecr_1_l) mean(Wisecr_2_l) mean(Wisecr_3_l) mean(Wisecr_4_l)];
err1 = [std(Wisecr_1_l) std(Wisecr_2_l) std(Wisecr_3_l) std(Wisecr_4_l)];
y2 = [mean(Stork_1_l) mean(Stork_2_l) mean(Stork_3_l) mean(Stork_4_l)];
err2 = [std(Stork_1_l) std(Stork_2_l) std(Stork_3_l) std(Stork_3_l)];

t1= [mean(Wisecr_1_t);mean(Wisecr_2_t);mean(Wisecr_3_t);mean(Wisecr_4_t)];
teer1 = [std(Wisecr_1_t);std(Wisecr_2_t);std(Wisecr_3_t);std(Wisecr_4_t)];
t2 = [mean(Stork_1_t);mean(Stork_2_t);mean(Stork_3_t);mean(Stork_4_t)];
teer2 = [std(Stork_1_t);std(Stork_2_t);std(Stork_3_t);std(Stork_4_t)];

figure();
subplot(2,1,1);
errorbar(y1,err1,'b-x');
hold on;
errorbar(y2,err2,'r-o');
ylim([0,40]);
xlim([0.5,4.5]);
xticks([1,2,3,4]);
yticks([0,20,40]);
xticklabels({'1','2','3','4'});
ylabel('Latency (s)');
xlabel('Token Number');
set(gca,'FontSize',18) % Creates an axes and sets its FontSize to 18
%legend({'Wisecr','Stork'},'Location','northwest');

subplot(2,1,2);

hb = bar([t1 t2]);
set(hb(1), 'FaceColor','b')
set(hb(2), 'FaceColor','r')
hold on;
errorbar(t1,teer1,'k.');
errorbar(t2,teer2,'k.');
ylim([0,7000]);
xlim([0.5,4.5]);
xticks([1,2,3,4]);
xticklabels({'1','2','3','4'});
ylabel('Throughput (bps)');
xlabel('Token Number');
set(gca,'FontSize',18) % Creates an axes and sets its FontSize to 18
%legend({'Wisecr','Stork'},'Location','north');


