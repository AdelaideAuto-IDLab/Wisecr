clear all;
%close all;
clc;

Wisecr_115B_l = [6.698312
6.4268481
6.1606179
6.9786288
6.7722555
6.4842628
8.321558
8.6145468
8.1691031
6.8696358
6.0003128
5.7113421
6.5455002
6.1941764
5.8565229
6.0792636
7.9188429
8.1419341
11.0039498
6.0232777
11.0401195
7.0944907
6.1144939
6.7831618
6.8883472
6.5027901
6.1194055
11.4101618
6.5335302
6.192604
8.0777425
7.3824869
7.7009093
6.6125129
5.8020554
6.6087747
6.5189198
7.4617193
6.5858623
6.237557
6.3215787
6.6238363
5.8418763
6.437496
5.6971356
6.4321638
7.1394904
6.4347895
6.081864
5.9862323
5.7981552
6.0336305
6.6018739
6.5364453
7.0988817
6.2650341
6.327524
7.3626413
6.727042
5.6566469
7.0050453
5.8131561
7.2462998
5.9461116
6.4210212
5.8031369
6.5421713
7.0783535
6.2205216
6.7784308
6.2452581
7.1884844
6.538236
6.439786
6.8039112
6.5443197
7.8322986
6.2329258
7.1664198
5.9240296
6.4164469
6.1546037
6.571096
6.4072239
6.4227387
6.3760342
6.3721923
7.0887015
6.2517764
6.2516534
8.0547477
5.6625229
6.1325213
6.2313862
5.9280177
6.6983637
6.9218464
6.4006717
5.831631
6.3939898
];


Stork_115B_l = [14.9810000000000;12.1020000000000;8.25900000000000;10.6850000000000;6.37000000000000;12.2610000000000;11.5070000000000;13.3450000000000;10.0310000000000;8.97100000000000;12.9770000000000;6.46000000000000;13.4340000000000;7.84000000000000;9.77000000000000;12.9820000000000;11.6180000000000;12.8640000000000;6.50800000000000;9.72400000000000;12.5830000000000;11.5680000000000;7.98100000000000;10.8450000000000;7.43500000000000;11.5610000000000;8.13700000000000;12.6890000000000;13.2570000000000;9.86100000000000;11.3920000000000;9.16000000000000;9.96400000000000;9.75200000000000;12.1250000000000;12.0030000000000;11.3780000000000;7.64700000000000;12.8320000000000;7.51300000000000;9.25700000000000;12.1640000000000;10.7420000000000;11.4670000000000;12.3630000000000;15.7650000000000;12.4380000000000;8.12000000000000;11.5540000000000;10.9820000000000;10.6670000000000;12.2350000000000;10.9700000000000;10.7800000000000;11.7310000000000;11.9810000000000;21.5240000000000;13.0270000000000;12.1080000000000;8.68200000000000;31.9720000000000;10.6560000000000;11.5410000000000;9.69800000000000;14.0390000000000;8.51200000000000;14.0350000000000;18.7200000000000;19.6750000000000;14.5900000000000;12.5250000000000;11.7260000000000;15.6290000000000;18.1440000000000;8.94700000000000;11.6650000000000;10.9560000000000;20.1290000000000;16.1990000000000;10.0080000000000;22.1990000000000;23.6880000000000;10.9410000000000;21.7810000000000;17.0600000000000;12.8990000000000;10.4260000000000;14.3670000000000;12.3170000000000;26.5340000000000;10.4570000000000;13.1310000000000;11.6310000000000;15.1150000000000;14.6120000000000;17.5350000000000;11.8760000000000;20.6360000000000;14.6620000000000;13.3760000000000];

Wisecr_407B_l = [10.171174
9.6154721
7.9775859
11.982244
7.8626538
8.2825025
7.2181877
8.3976732
7.3288401
7.4756158
7.7809603
7.6956635
7.3127171
8.2600932
8.9977165
7.5805388
7.8332503
8.3725613
7.6326434
8.4941738
7.510762
8.8433781
7.7326561
9.0239601
7.6353795
8.6779797
8.5668891
8.2323571
7.3029454
7.4988636
7.5416548
8.4861387
7.3965708
7.6879411
8.0788701
8.0226536
8.6029393
7.7562877
7.8242572
7.8873165
7.2655108
8.4205054
8.782279
8.3483738
12.3716992
7.3187957
7.6396261
7.8677537
8.8827255
8.4794426
7.4879021
7.0873139
7.8837695
13.2334274
7.0421335
7.8049128
8.9284748
8.0643803
14.4957564
8.2148709
7.4593442
12.0679123
8.7524895
7.6766593
8.4010232
7.4432061
7.0293787
7.3137359
8.0111106
7.1046113
7.8642129
15.9364609
7.9244298
7.8723646
8.118302
7.4635789
8.8850059
7.816969
7.4623229
9.1650367
7.69374
7.575136
12.1886993
8.0407499
7.2084067
8.4714945
7.6767199
6.8471187
8.088256
7.5347787
7.6781274
7.5923605
7.6775419
7.154445
7.645079
7.4717274
7.5430043
7.8495499
8.0238704
7.9544749
];

Stork_407B_l = [8.76400000000000;15.0560000000000;11.3210000000000;15.5840000000000;6.83900000000000;7.45100000000000;11.0740000000000;15.1360000000000;14.9530000000000;12.6730000000000;7.87800000000000;8.55200000000000;8.60100000000000;11.3910000000000;10.2920000000000;9.34600000000000;8.88900000000000;13.4500000000000;17.8570000000000;9.91800000000000;9.68600000000000;8.74000000000000;12.0230000000000;8.80300000000000;14.3810000000000;11.6810000000000;13.5600000000000;15.1460000000000;10.6890000000000;15.7230000000000;11.2900000000000;9.90300000000000;9.88200000000000;13.3920000000000;10.2300000000000;11.1300000000000;11.3770000000000;15.0030000000000;8.70900000000000;14.2510000000000;9.00900000000000;12.0300000000000;14.1020000000000;12.0570000000000;10.6720000000000;8.87100000000000;7.49800000000000;12.6760000000000;12.7780000000000;12.1680000000000;10.8640000000000;18.4740000000000;12.5260000000000;10.5910000000000;12.7270000000000;8.30600000000000;11.9000000000000;11.3930000000000;13.1420000000000;15.3430000000000;15.7130000000000;14.3230000000000;11.6530000000000;13.2470000000000;10.4540000000000;12.3020000000000;15.3500000000000;12.1530000000000;11.8340000000000;14.6040000000000;14.1620000000000;10.7260000000000;14.6610000000000;16.2190000000000;13.0350000000000;10.8680000000000;10.8040000000000;12.6840000000000;15.1160000000000;16.1730000000000;15.3560000000000;11.4910000000000;11.2950000000000;16.6230000000000;13.0240000000000;16.9620000000000;14.0870000000000;13.8810000000000;13.3890000000000;11.1870000000000;15.1570000000000;15.7520000000000;18.1360000000000;20.4690000000000;12.4190000000000;14.5160000000000;13.2980000000000;13.7750000000000;11.8870000000000;16.7280000000000];

Wisecr_1280B_l = [14.5907838
14.4902592
14.7683339
15.0560733
14.9728622
15.4444312
24.1358837
14.0641928
12.9928089
14.156343
15.1970612
13.8649442
15.939473
13.3812153
14.9257456
13.3846799
13.9627299
15.6911111
13.8849957
22.4036554
15.9665563
13.6013337
16.2907839
13.8743556
15.2768968
12.5762238
17.3580112
15.1195373
15.05955
13.2531117
14.5390727
13.8747431
13.9497794
14.1097336
29.8056325
18.57092
14.5308941
15.3283635
15.7059991
14.7835396
15.4685497
14.9413125
12.916989
30.5525711
13.1702333
15.8639917
16.3522344
14.745222
28.010642
13.0895412
13.5605483
14.1616049
34.860947
14.8721078
15.8159298
16.5559285
20.3577096
25.7229489
14.9374244
21.5697757
31.4655845
17.3964558
27.4070596
13.3008212
26.5844528
13.901316
14.7138826
15.2868437
16.2029684
19.8440518
14.442922
13.690671
14.2580111
12.7087831
14.7220663
15.7813855
13.5437706
14.2055245
12.9563732
17.058295
16.3456353
14.8483512
14.6462424
15.7431142
13.9923698
15.6968562
24.9207132
18.777874
13.4085563
14.2086127
13.9298209
12.9449622
144.9265573
135.6218477
135.6050738
135.6300706
135.4018451
135.7339582
];

Stork_1280B_l = [14.8330000000000;10.3080000000000;10.2830000000000;22.3150000000000;16.7150000000000;17.3560000000000;21.5790000000000;13.7240000000000;16.0940000000000;10.2230000000000;26.8280000000000;18.9580000000000;27.3170000000000;11.2740000000000;27.8740000000000;16.1710000000000;39.0190000000000;11.3560000000000;18.3700000000000;40.3300000000000;23.1460000000000;19.7840000000000;12.8970000000000;21.2460000000000;28.6400000000000;17.1570000000000;12.8800000000000;31.0770000000000;16.3230000000000;20.7130000000000;15.3830000000000;22.6710000000000;31.4780000000000;35.7150000000000;30.1180000000000;20.0320000000000;38.5960000000000;15.9870000000000;34.0990000000000;48.4370000000000;17.3560000000000;30.8120000000000;40.4270000000000;21.2830000000000;32.8340000000000;25.9220000000000;41.2810000000000;16.5270000000000;23.1270000000000;21.8060000000000;18.0850000000000;29.6540000000000;32.0030000000000;19.2770000000000;43.8940000000000;29.3560000000000;39.6870000000000;22.6070000000000;28.6470000000000;18.6620000000000;18.1770000000000;17.7680000000000;22.8080000000000;21.9560000000000;18.1230000000000;31.5680000000000;20.5410000000000;30.5630000000000;19.3440000000000;23.2690000000000;23.0660000000000;36.6580000000000;33.7920000000000;47.0210000000000;22.9160000000000;63.5410000000000;19.5500000000000;24.1880000000000;44.7940000000000;24.5310000000000;38.8510000000000;20.1700000000000;21.0480000000000;23.0160000000000;22.9670000000000;29.0310000000000;28.5120000000000;23.2750000000000;26.7240000000000;26.2250000000000;19.3070000000000;27.7220000000000;27.9150000000000;41.3160000000000;26.4220000000000;34.0500000000000;25.5190000000000;25.4700000000000;48.3890000000000;30.6990000000000];
% remove outliers
Wisecr_115B_l = rmoutliers(Wisecr_115B_l,'quartiles');
Wisecr_407B_l = rmoutliers(Wisecr_407B_l,'quartiles');
Wisecr_1280B_l = rmoutliers(Wisecr_1280B_l,'quartiles');

Stork_115B_l = rmoutliers(Stork_115B_l,'quartiles');
Stork_407B_l = rmoutliers(Stork_407B_l,'quartiles');
Stork_1280B_l = rmoutliers(Stork_1280B_l,'quartiles');


Wisecr_115B_t = 115*8*4./Wisecr_115B_l;
Wisecr_407B_t = 407*8*4./Wisecr_407B_l;
Wisecr_1280B_t = 1280*8*4./Wisecr_1280B_l;


Stork_115B_t = 115*8*4./Stork_115B_l;
Stork_407B_t = 407*8*4./Stork_407B_l;
Stork_1280B_t = 1280*8*4./Stork_1280B_l;



y1= [mean(Wisecr_115B_l) mean(Wisecr_407B_l) mean(Wisecr_1280B_l)];
err1 = [std(Wisecr_115B_l) std(Wisecr_407B_l) std(Wisecr_1280B_l)];
y2 = [mean(Stork_115B_l) mean(Stork_407B_l) mean(Stork_1280B_l)];
err2 = [std(Stork_115B_l) std(Stork_407B_l) std(Stork_1280B_l)];

t1= [mean(Wisecr_115B_t);mean(Wisecr_407B_t);mean(Wisecr_1280B_t)];
teer1 = [std(Wisecr_115B_t);std(Wisecr_407B_t);std(Wisecr_1280B_t)];
t2 = [mean(Stork_115B_t);mean(Stork_407B_t);mean(Stork_1280B_t)];
teer2 = [std(Stork_115B_t);std(Stork_407B_t);std(Stork_1280B_t)];

figure();
subplot(2,1,1);
errorbar(y1,err1,'b-x');
hold on;
errorbar(y2,err2,'r-o');
ylim([0,60]);
xlim([0.5,3.5]);
xticks([1,2,3]);
yticks([0,30,60]);
xticklabels({'115','407','1280'});
ylabel('Latency (s)');
xlabel('Fimware size (Byte)');
set(gca,'FontSize',18) % Creates an axes and sets its FontSize to 18
%legend({'Wisecr','Stork'},'Location','northwest');

subplot(2,1,2);

hb = bar([t1 t2]);
set(hb(1), 'FaceColor','b')
set(hb(2), 'FaceColor','r')
hold on;
errorbar(t1,teer1,'k.');
errorbar(t2,teer2,'k.');
xlim([0.5,3.5]);
ylim([0,4000]);
xticks([1,2,3]);
xticklabels({'115','407','1280'});
ylabel('Throughput (bps)');
xlabel('Fimware size (Byte)');

set(gca,'FontSize',18) % Creates an axes and sets its FontSize to 18
%legend({'Wisecr','Stork'},'Location','northwest');


