clear all;
close all;
clc;

tagNum = 4;
firmwareSize = 115 * 8;
pl = tagNum * firmwareSize; %payload size

WisecrB_115B_l = [7.2553689
5.6696356
7.2362785
6.6994546
6.2853149
6.9801626
6.5258606
5.9456558
5.9904379
6.1430452
5.7972829
6.0602674
6.7240277
6.5659887
6.6385165
5.8382545
5.8213858
6.5639489
6.2467118
6.0009903
6.4916567
6.5788938
6.6361934
6.7356357
7.3318025
6.0025743
7.8676273
6.0569517
6.3609009
8.4732591
6.5427133
6.0419147
6.5817003
8.4660816
5.4085149
6.4660592
6.4588912
6.0990795
7.470019
6.7136856
6.0218705
7.1666726
7.5432422
6.1665246
7.247033
6.2805222
9.6150414
6.9715529
6.4387092
6.8268084
6.4333641
5.6989262
7.0024434
5.9031857
6.127384
8.9600528
10.5515951
7.1278206
6.0287482
7.4967178
5.8503467
6.3667797
6.200187
5.9153203
6.3555714
6.788954
7.1450228
6.1289933
6.1378773
5.7568045
6.0158164
6.6800235
5.909026
6.8258825
6.2698421
6.2229956
7.1639258
9.6148977
6.1981705
6.0408799
6.5583656
5.9457265
6.557338
5.8249126
6.3322094
5.9121361
5.9654215
9.8033093
9.3275182
9.0697213
9.0465436
8.8113843
9.7502684
8.5756245
9.5137161
9.2394896
9.1208808
10.0116457
9.7125698
8.5223379
];
WisecrB_115B_t = pl./WisecrB_115B_l;
WisecrS_115B_l = [13.1828508
12.7189502
11.1434583
12.375015
11.8453637
12.5410756
11.5750586
11.0017641
12.0393676
12.2671254
12.8784641
11.9802094
12.1679257
11.2317629
12.1831617
12.0950571
11.5509732
11.5814853
11.1914783
12.3393617
12.1979594
11.7358863
12.973205
11.5975921
12.0693779
10.5283436
12.5268309
11.9646408
11.5481195
11.6946766
11.0756051
13.3067754
11.0735798
12.9477123
13.3523608
11.0582968
10.9801983
12.2614297
14.3685181
13.869063
13.2713906
13.8780996
15.2237207
14.9713388
11.4388524
10.8202058
12.1806485
11.4666682
11.5547308
12.1443402
13.1999478
12.299717
15.255726
10.4834355
12.5827577
13.404067
11.3201429
11.6039193
12.127111
12.1362963
12.0879823
12.538501
10.9003002
10.4405212
11.4074023
10.7958474
11.5885709
12.9348347
11.5651025
10.0055696
12.9698525
10.5075302
10.924958
11.9244516
10.3416758
12.4630966
10.5913761
12.1993584
14.3271776
12.0558994
10.9615452
12.6267344
10.3915047
13.4122678
11.8925463
12.4788296
10.1821246
12.8605256
13.6010497
12.2502315
12.4162163
11.5179252
11.5703094
11.9061624
14.2276788
11.1788253
12.0535163
13.9275683
10.2915323
12.3252974
];
WisecrS_115B_t = pl./WisecrS_115B_l;
SecuCode_115B_l = [11.9956844
10.2355969
8.7569669
9.3625964
11.0445449
11.7870022
10.4026754
9.0842465
9.8823939
14.0717819
11.0699428
9.4997115
10.7956866
13.8815941
10.4394187
9.9057388
11.4285035
11.0520271
10.9915208
10.4058046
10.756034
8.4579245
8.9789293
8.8078171
8.9603512
9.2857745
11.28721
10.0683806
10.5083719
11.3493705
10.7832531
8.7718268
9.9754291
11.3585064
10.9944316
11.3142401
13.859453
10.1201734
10.8973486
12.9929922
9.6027371
9.7414058
8.2372867
11.3598898
11.0130192
11.3279561
8.7603945
10.1656543
10.3545411
10.2324658
9.0632181
10.2215973
10.6382669
11.5139032
9.8091033
9.205038
10.1897013
9.8512329
9.3338479
10.2085607
10.518873
10.030455
10.5420728
12.7130985
11.5851759
10.4901028
13.2192731
11.7398325
10.4887448
9.3358385
8.9431018
10.4992309
11.2112685
10.1514575
9.7824992
9.9198657
9.8233629
11.5028919
9.6886644
10.1198996
9.6814797
12.8942726
14.0938041
10.1056284
9.9365787
9.4662743
11.9482995
10.7998184
10.2666628
12.1146813
9.3229591
10.802295
8.2972701
9.7556075
10.2703555
10.2264623
10.0867693
10.5118205
8.9614698
10.8431036
];
SecuCode_115B_t = pl./SecuCode_115B_l;

tagNum = 4;
firmwareSize = 407 * 8;
pl = tagNum * firmwareSize; %payload size

WisecrB_407B_l = [9.2478307
8.8946358
8.4402283
8.9504871
9.8067782
9.1085791
7.8165905
14.1867659
9.1876602
7.0677338
8.4723578
9.5739766
10.0675351
7.627968
8.0892037
8.3956798
8.7675694
9.0768589
14.6010723
13.6566084
9.0655313
8.8440846
7.897081
8.8107755
8.633383
7.5785713
7.787042
8.7063644
8.5256095
7.997454
14.374432
8.0300226
9.0607568
8.2731932
8.3176339
8.1014875
7.8283695
9.1029257
8.4386305
8.4896191
9.057632
7.9662811
9.2979321
8.920324
7.9974478
8.6147619
9.0992992
8.5253468
16.1091867
8.1924592
7.7887229
8.760042
8.9354589
18.1787801
8.8132796
9.1038136
9.2890766
8.5401426
7.8707633
7.8602753
8.3800462
8.4322965
8.2241108
8.6404375
9.3626408
7.5264803
13.1412916
7.6739708
8.3151031
8.3515623
7.9506475
8.1566847
8.0800249
7.9496672
8.4547052
8.3420515
8.8914556
9.1622242
8.1466319
8.0849262
9.0742073
7.3703217
7.6145642
7.6215556
8.7543458
8.538503
7.7370955
8.2655315
8.181278
8.4564228
7.6989728
8.2103205
7.7134581
8.4734723
9.1135213
9.1979929
8.3638569
7.8466049
8.9652492
8.0728843
];
WisecrB_407B_t = pl./WisecrB_407B_l;
WisecrS_407B_l = [23.9635574
20.7031818
22.4968518
19.6954071
21.3423906
28.5519413
20.964559
19.3886385
19.8382107
21.2200789
23.4296623
21.6429174
20.2145803
19.9463163
21.5938047
20.9659538
19.5240515
21.1905362
21.4448553
19.4583333
22.3823709
18.7296238
24.2988155
21.7374663
22.0520804
20.0602
20.2391432
20.9857094
21.8493273
21.7931679
21.567421
21.308832
20.7809367
22.3221145
24.2878705
23.5254069
22.9697417
20.781185
20.0018883
22.1841001
19.5941932
22.8059295
20.9873265
23.3725681
23.8271592
20.8015003
20.0850932
18.8733446
23.1276519
19.6834765
19.5318192
25.6091372
21.3541996
22.7447577
19.9176927
20.7188202
20.4244147
24.2092063
21.330902
21.6064717
20.3591886
22.2943798
24.7608755
21.6566325
18.8726319
22.0007655
21.820734
22.0717424
19.9970644
20.0104816
19.6799537
21.917383
20.4556286
19.8542964
21.8400912
18.9390566
20.4289542
23.7033373
20.8000172
19.6142081
20.0765324
20.903835
19.5445463
20.8435255
23.4161831
19.9113663
21.4983185
19.5168148
22.9971495
21.6471644
20.0844459
18.9989076
20.2222974
21.2750374
20.4838467
23.3379619
20.1094658
23.4691502
22.9665775
21.4294621
];
WisecrS_407B_t = pl./WisecrS_407B_l;
SecuCode_407B_l = [17.3370243
21.5343841
18.7672221
20.3996932
22.0647351
18.0140322
17.6017833
18.0971842
19.6818484
22.7430921
21.3145005
19.4980047
20.2997498
19.5599189
21.1921724
18.5461597
18.4419829
21.632327
24.2895431
21.6602958
20.9362744
18.8305766
19.6430667
19.18052
18.7032521
22.3259473
20.6249407
22.0751318
19.3051175
18.0433175
22.2205262
18.5353734
20.2029085
15.8151438
17.4606014
21.8388347
18.4916031
20.1380097
26.0860237
18.8793944
18.9571877
23.5724448
19.2867176
17.7641961
19.2904886
20.3723649
20.0158831
17.570946
11.9287867
17.421895
23.5894046
17.681864
19.5692596
18.8306656
20.0935847
17.209537
18.4503419
21.4119878
19.5012905
19.1494152
20.3953661
19.9477389
18.1933721
20.1297296
19.8298051
18.6750003
24.0248387
20.7216843
17.3107642
17.2473635
19.572198
22.4912995
21.423719
21.7248361
17.4500105
18.087562
20.6526943
21.5360024
20.8328882
20.5472082
19.0152613
16.8863931
18.4903007
20.7088496
18.5137456
21.0191516
18.8690552
23.4092568
19.3368496
17.9098534
18.6616768
20.3060484
20.248019
20.0033292
19.0855006
18.1689062
17.4176725
18.8763795
19.7322054
20.7239544
];
SecuCode_407B_t = pl./SecuCode_407B_l;

tagNum = 4;
firmwareSize = 1280 * 8;
pl = tagNum * firmwareSize; %payload size

WisecrB_1280B_l = [12.8636814
17.1737475
15.0944785
14.155244
14.2528788
13.7930029
13.2413385
13.8023935
19.5560082
13.4562712
13.0111597
14.7831557
14.0730272
13.5747105
13.6141545
13.3071161
12.893247
14.2741279
12.050021
16.5567296
14.3391224
24.8011896
12.9853096
12.946085
12.7410453
12.9297639
14.7229143
14.3017618
12.8297935
27.9486759
13.4697825
13.1195763
14.2104453
13.5026956
13.5466059
12.6681949
15.913622
17.3904706
14.1046221
12.3881726
12.3730925
23.2676394
12.7234347
15.5037422
12.9178701
13.4871798
14.7842064
13.326441
14.6408257
12.2129967
13.1284885
12.7519299
14.2207436
13.2579068
13.2631528
22.9071789
13.3809085
11.8938929
12.5705619
14.3454201
14.0464098
12.3798731
12.1930582
14.1501279
14.0954406
11.9625025
12.0964434
13.5608594
14.3253392
12.4776096
14.3892485
13.9878025
13.6254551
13.99726
13.0524547
13.9308438
12.6937585
13.0428991
11.9168182
13.3200183
12.6472428
12.9682436
42.7977807
14.5329757
13.4176655
14.6410335
13.0477112
13.470619
13.7251271
13.3871075
13.8558779
12.6227732
22.0596386
12.4484735
14.1063704
13.6502032
13.5239536
13.479948
13.4945483
12.8596165
];
WisecrB_1280B_t = pl./WisecrB_1280B_l;
WisecrS_1280B_l = [49.071875
47.2103327
44.4692869
51.9963593
45.8418522
52.6004106
45.8061116
49.9462577
52.1451865
61.065337
44.3775984
45.9692153
45.006867
46.5877562
48.6560913
59.5719254
46.5392309
47.6669499
52.1098136
48.1172487
44.8140946
48.2604501
42.1019841
47.3017373
49.5936296
49.6190213
49.7064367
52.1049417
42.5575611
49.9104396
51.0706581
43.4476169
45.9288685
47.3231011
45.9827516
47.4140618
47.733642
44.5451929
48.6611869
49.2583575
49.4649304
65.0078501
50.9632351
47.8108304
45.6610083
45.6394246
47.2269363
47.8708146
48.6742904
43.8203734
55.4239827
51.6909609
48.2758279
52.3071371
45.694725
47.5449372
46.0623857
50.6092424
51.0705591
46.8425492
43.4796733
44.7780271
44.4947019
47.4249516
40.5342626
48.1368746
48.4547133
49.7467313
49.4608844
47.5398294
47.8054598
46.6607392
47.2000993
44.7444158
49.0779498
56.0004479
67.2521012
50.3133085
47.7682889
46.1485288
51.3951913
47.2338073
55.9772543
46.9472115
53.1629189
48.2953445
48.4689194
50.345569
48.7965763
47.0585884
48.3985505
46.3173062
47.3551881
47.9905799
50.4721655
56.568109
51.4359012
43.4036022
46.5493883
49.1617275
];
WisecrS_1280B_t = pl./WisecrS_1280B_l;
SecuCode_1280B_l = [59.3973904
54.0105374
51.6617159
49.9885284
51.9996389
44.9371625
47.5130126
55.1358507
51.5307497
47.1870064
55.6961267
57.0497938
54.7869443
48.8131729
49.5175994
46.0771291
53.1204454
54.6525694
46.1151052
47.4031414
46.2883338
53.4671571
54.651806
53.8564025
56.067317
47.1712233
53.5931089
44.9936711
49.0644186
48.6702474
51.3306094
47.7908693
22.9758775
34.5213203
48.5483817
44.1948767
43.7524444
50.0759555
46.9749609
49.1660946
46.0697917
43.2297244
47.8021446
43.6791105
46.9989845
47.4453956
50.1141904
50.9312998
42.9737356
48.1010459
50.7876561
50.8168311
50.9317844
48.788188
45.0255552
52.8381369
52.3388975
52.02724
46.4751241
49.1986673
44.084318
48.0278342
51.1832433
49.8387377
47.7313173
52.8486265
52.792459
50.5586313
63.7859921
57.2051727
51.6008843
51.6814542
51.3121176
48.4624081
54.2695795
48.5742722
44.1585917
51.0534163
49.4576136
47.3424587
51.4358272
49.3620059
44.2644466
50.6076099
51.3318051
46.6014839
51.4418103
54.3915978
48.718605
49.1010689
50.2355161
48.3985707
47.2344825
44.3169112
47.8884831
52.2473683
48.9926214
46.0710967
45.0362645
47.8868893
];
SecuCode_1280B_t = pl./SecuCode_1280B_l;

bl= [mean(WisecrB_115B_l) mean(WisecrB_407B_l) mean(WisecrB_1280B_l)];
beerl = [std(WisecrB_115B_l) std(WisecrB_407B_l) std(WisecrB_1280B_l)];
sl = [mean(WisecrS_115B_l) mean(WisecrS_407B_l) mean(WisecrS_1280B_l)];
serrl = [std(WisecrS_115B_l) std(WisecrS_407B_l) std(WisecrS_1280B_l)];
cl = [mean(SecuCode_115B_l) mean(SecuCode_407B_l) mean(SecuCode_1280B_l)];
cerrl = [std(SecuCode_115B_l) std(SecuCode_407B_l) std(SecuCode_1280B_l)];

bt= [mean(WisecrB_115B_t);mean(WisecrB_407B_t);mean(WisecrB_1280B_t)];
berrt = [std(WisecrB_115B_t);std(WisecrB_407B_t);std(WisecrB_1280B_t)];
st = [mean(WisecrS_115B_t);mean(WisecrS_407B_t);mean(WisecrS_1280B_t)];
serrt = [std(WisecrS_115B_t);std(WisecrS_407B_t);std(WisecrS_1280B_t)];
ct = [mean(SecuCode_115B_t);mean(SecuCode_407B_t);mean(SecuCode_1280B_t)];
cerrt = [std(SecuCode_115B_t);std(SecuCode_407B_t);std(SecuCode_1280B_t)];

figure(1);
subplot(2,1,1);
errorbar(bl,beerl,'b-x');
hold on;
errorbar(sl,serrl,'g--s');
hold on;
errorbar(cl,cerrl,'r-o');


ylim([0,100]);
xlim([0.5,3.5]);
xticks([1,2,3]);
xticklabels({'115','407','1280'});
ylabel('Latency (s)');
xlabel('Fimware size (Byte)');
set(gca,'FontSize',18) % Creates an axes and sets its FontSize to 18
legend({'Wisecr','Wisecr(Seq)','SecuCode'},'Location','north','Orientation','horizontal','FontSize',14);

subplot(2,1,2);

hb = bar([bt st ct]);
set(hb(1), 'FaceColor','b')
set(hb(2), 'FaceColor','g')
set(hb(3), 'FaceColor','r')
hold on;
errorbar(bt,berrt,'k.');
errorbar(st,serrt,'k.');
errorbar(ct,cerrt,'k.');
ylim([0,5000]);
xlim([0.5,3.5]);
xticks([1,2,3]);
xticklabels({'115','407','1280'});
ylabel('Throughput (bps)');
xlabel('Fimware size (Byte)');

set(gca,'FontSize',18) % Creates an axes and sets its FontSize to 18
legend({'Wisecr','Wisecr(Seq)','SecuCode'},'Location','best','Orientation','horizontal','FontSize',14);


